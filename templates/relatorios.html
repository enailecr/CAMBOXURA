{% extends "menu.html" %}
{% load static %}

{% load render_table from django_tables2 %}


{% block content %}

<div >
    <table id="CAMTecnoligaTabela">
            <caption><h1>Relatórios</h1><div align="right">

  <caption><div align="right">
    </div></caption>

        <meta http-equiv="content-type" content="text/html;charset=utf-8" />
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

            <script language="JavaScript" >
                        function enviardados(){
      
                       
                            if(document.dados.data_inicio.value < document.dados.data_fim.value)
                            {
                            alert( "Data Inválida!" );
                            document.dados.data_inicio.focus();
                            return false;
                            }

                          
                        // if( document.dados.dia_mes_inicio.value > document.dados.dia_mes_termina.value)
                        // {
                        // alert( "Dia de término não pode ser menor que dia de início" );
                        // document.dados.dia_mes_inicio.focus();
                        // return false;
                        // }
      
                        // if( document.dados.mes_inicio.value == "fev")
                        // {  
                        //     if(document.dados.dia_mes_inicio.value == 30 || document.dados.dia_mes_inicio.value == 31)
                        //     {
                        //     alert( "Dia Inválido!" );
                        //     document.dados.hora_inicio.focus();
                        //     return false;
                        //     }
      
                        //     if(document.dados.dia_mes_termina.value == 30 || document.dados.dia_mes_termina.value == 31)
                        //     {
                        //     alert( "Dia Inválido!" );
                        //     document.dados.hora_inicio.focus();
                        //     return false;
                        //     }
                        // }
                        
                        // if( document.dados.mes_termino.value == "fev")
                        // {  
                        //     if(document.dados.dia_mes_inicio.value == 30 || document.dados.dia_mes_inicio.value == 31)
                        //     {
                        //     alert( "Dia Inválido!" );
                        //     document.dados.hora_inicio.focus();
                        //     return false;
                        //     }
      
                        //     if(document.dados.dia_mes_termina.value == 30 || document.dados.dia_mes_termina.value == 31)
                        //     {
                        //     alert( "Dia Inválido!" );
                        //     document.dados.hora_inicio.focus();
                        //     return false;
                        //     }
                        // }
                          
                        return true;
                        }
                          
                        </script>
        </head>
        <body>
                <div id="divCenter">
                        <br />
    <form action="{% url 'streaming_novo'%}" method="POST" name="dados" onSubmit="return enviardados();">
                {% csrf_token %}
            <table cellspacing="10">
                    <tr>
                            <td>
                            <label for="data_inicio">Data Início: </label>
                            </td>
                            <td align="left">
                            <input type="date" name="data_inicio">
                            </td>
                            <td>
                                    <label for="campo">Campo</label>
                                </td>
                                <td align="left">
                                        <select name="campo">
                                        <option value="dest">Destino</option>
                                        <option value="org">Origem</option>                                       
                                        <option value="cano">Canal Origem</option>
                                        <option value="cod">Código da Conta</option>
                                        <option value="cand">Canal Destino</option>
                                    </select>
                                </td>   
                                        <td align="left">
                                        <input type="text" name="campo">
                                        </td>
                        <td></td>
                    </tr>
                    <tr>
                            <td>
                            <label for="data_fim">Data Fim: </label>
                            </td>
                            <td align="left">
                            <input type="date" name="data_fim">
                            </td>
                            <td>
                                    <label for="status">Status</label>
                                </td>
                                <td align="left">
                                        <select name="status">
                                        <option value="all">Todos</option>                                       
                                        <option value="resp">Respondidos</option>
                                        <option value="ocup">Ocupados</option>
                                        <option value="fail">Fracassados</option>
                                        <option value="no_resp">Sem Resposta</option>
                                    </select>
                                </td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                            <td>
                                    <label for="chamada">Chamada em Grupo</label>
                                </td>
                                <td align="left">
                                        <select name="chamada">
                                        <option value="1">600/CAM</option>
                                        <option value="all">Qualquer Chamada em Grupo</option>
                                    </select>
                                </td>
                            <td><button type="submit" class="formobjects">Pesquisar</button></td>
                            </tr>
            </table>
            <br />
            <tr>
                <td>
                       
                </td>
            </tr>
<table>
        <meta http-equiv="content-type" content="text/html;charset=utf-8" />

</table>
</body>
</form>
<!-- <button type="submit">Imprimir</button></td> -->
<input type="button" value="Imprimir" onclick="printPage('block1');"></input>
<button type="btnExport">Exportar para Excel</button></td>
<div id=block1>
{% render_table table %}
</div>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="{% static 'js/jquery.btechco.excelexport.js' %}"></script>
<script src="{% static 'js/jquery.base64.js' %}"></script>
<script>
    $(document).ready(function () {
        $("#btnExport").click(function () {
                    // trocar nome da tabela btnExport

            $("#tblExport").btechco_excelexport({
                        // trocar nome da tabela btnExport

                containerid: "tblExport"
               , datatype: $datatype.Table
               , filename: 'sample'
            });
        });
    });
</script>
<script>
    function printPage(id)
    {
       var html="<html>";
       html+= document.getElementById(id).innerHTML;
    
       html+="</html>";
    
       var printWin = window.open('','','left=0,top=0,width=1,height=1,toolbar=0,scrollbars=0,status  =0');
       printWin.document.write(html);
       printWin.document.close();
       printWin.focus();
       printWin.print();
       printWin.close();
    }
    </script>
{% endblock %}


